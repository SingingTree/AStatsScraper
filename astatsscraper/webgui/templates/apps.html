<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Games</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='datatables.min.css') }}"/>
    <script type=text/javascript src="{{ url_for('static', filename='jquery-2.2.3.min.js') }}"></script>
    <script type=text/javascript src="{{ url_for('static', filename='datatables.min.js') }}"></script>
    <script type="text/javascript" class="init">
    function setupTextSearch (th) {
        $(th).html('<input type="text"\>');
    }

    function setupNumericSearch (th) {
        $(th).html('<div>' +
                   '<select>' +
                        '<option value="lt">\<</option>' +
                        '<option value="eq">\=</option>' +
                        '<option value="gt">\></option>' +
                   '</select>' +
                   '<input type="number"\>' +
                   '</div>');
    }

    function setupDateSearch (th) {
        $(th).html('<div>' +
                   '<select>' +
                        '<option value="lt">\<</option>' +
                        '<option value="eq">\=</option>' +
                        '<option value="gt">\></option>' +
                   '</select>' +
                   '<input type="date"\>' +
                   '</div>');
    }

    var data = {{ apps_info_json | safe }};
    $(document).ready(function() {
        var table = $('#GameTable').DataTable({
            fixedHeader: true,
            "orderCellsTop": true, // Top cell in header is used to sort
            data: data
        });

        // Setup all the search fields
        $('#FilterRow').find('> th').each ( function (i, th) {
            if ($(th).hasClass('NumericSearch')) {
                setupNumericSearch(th);
            }
            if ($(th).hasClass('TextSearch')) {
                setupTextSearch(th);
            }
            if ($(th).hasClass('DateSearch')) {
                setupDateSearch(th);
            }
        });
    });
    </script>
</head>
<body>
<table id="GameTable">
    <thead>
    <tr>
        <th>App Id</th>
        <th>Title</th>
        <th>Time to 100%</th>
        <th>Total Points</th>
        <th>Points Per Time</th>
        <th># Players</th>
        <th># Players to 100%</th>
        <th>% Players to 100%</th>
        <th>Last Updated</th>
    </tr>
    <tr id="FilterRow">
        <th class="NumericSearch">App Id</th>
        <th class="TextSearch">Title</th>
        <th class="NumericSearch">Time to 100%</th>
        <th class="NumericSearch">Total Points</th>
        <th class="NumericSearch">Points Per Time</th>
        <th class="NumericSearch"># Players</th>
        <th class="NumericSearch"># Players to 100%</th>
        <th class="NumericSearch">% Players to 100%</th>
        <th class="DateSearch">Last Updated</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>
</body>